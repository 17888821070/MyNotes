# MySql基础

## 1. 数据表设计三大范式

### 第一范式

通俗理解：每一列属性都是不可再分的属性

```txt
电话号码可以分成，家庭电话、公司电话、手机号，只有电话号码字段就不符合第一范式
```

### 第二范式

通俗理解：表中的每一个属性都与主键有关

```mysql
《学生表》 
      [学号] [姓名] [年龄] [手机号] [所在院校] [院校信息] [所在宿舍] []
```

### 第三范式

通俗理解：要求数据之间不存在传递关系，每一列都与主键直接相关，不需要简介查询

```java
//院校地址和院校电话和学生没有直接关系，不符合第三范式
 Student表（学号，姓名，年龄，性别，所在院校，院校地址，院校电话）

//将表分为Student表和school表就达到第三范式的要求
 Student表（学号，姓名，年龄，性别，所在院校）
 school表（所在院校，院校地址，院校电话）
```

## 2. 执行顺序

```mysql
-- 查询完整语法--
SELECT DISTINCT [column_list]
FROM [table]
JOIN [table] ON [condition]  
WHERE    [condition]
GROUP BY [column_name]
HAVING   [condition]
ORDER BY [condition][ASC/DESC]
LIMIT    [num1,num2]

-- SQL执行顺序--
-- 所有的 查询语句都是从from开始执行的，在执行过程中，每个步骤都会为下一个步骤生成一个虚拟表，这个虚拟表将作为下一个执行步骤的输入。
-- 1.FROM     	表			从数据库找到表
-- 2.JOIN     	表			找到from的表和join的表，产生笛卡尔积临时表Temp1
-- 3.ON       	条件		   根据on条件在笛卡尔积表中筛选得到临时表Temp2
-- 4.WHERE    	分组前筛选    根据条件得到筛选结果Temp3
-- 5.GROUP BY 	分组         对Temp3按照固定的字段进行分组排序，得到临时表Temp4
-- 6.聚合函数 	 AVG()等      
-- 7.HAVING    	分组后筛选    进行分组后筛选，得到临时表Temp5
-- 8.SELECT    	查询         在Temp5表中挑选指定的字段得到Temp6
-- 9.DISTINCT  	去重         对字段进行去重，产生临时表Temp7
-- 10.ORDER BY 	排序         对数据新型排序，产生临时表Temp8
-- 11.LIMIT    	分页         对表进行分页得到临时表
```

## 3. 执行计划

1. **连接器**
   * 负责与客户端通信，验证用户账号密码，查询用户权限
2. **缓存**
   * 缓存sql语句和对应的查询结果，命中直接返回，在mysql8.0删除了缓存
3. **分析器**
   * 分析sql语句的合法性
4. **优化器**
   * 对sql进行优化，如使用哪个索引
5. **执行器**
   * 调用存储引擎的api
6. **存储引擎**

