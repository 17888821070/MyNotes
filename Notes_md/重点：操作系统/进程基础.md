# 进程基础

## 1、进程常见状态及转换

* 常见状态：

  就绪：获取到所需的除cpu以外的所有资源

  运行：就绪状态的进程获取到cpu执行权

  阻塞：在运行状态时需要某种资源，等待事件或资源到达，进入阻塞

* 转换：
  * 就绪和运行：系统调度就绪的进程进入运行状态，时间片已到运行状态的进程交出cpu进入就绪
  * 运行和阻塞：运行状态的进程需要某种事件或资源无法继续，进入阻塞状态
  * 就绪和阻塞：阻塞的进程等待的的时间发生进入就绪

![img](imgs\1118296-20180522204056722-921601285.jpg)

## 2、进程同步

同步让进

忙则等待

有限等待

让权等待

## 3、[进程间通信](https://www.cnblogs.com/zgq0/p/8780893.html)

* 管道

  > 管道是单向的、先入先出、无结构的、固定大小的字节流，连接两个进程的输入和输出流。写进程在管道末端写入数据，读进程在首端读取数据。读取的数据会移走，其他进程不能再读。
  >
  > 1. 管道
  >
  >    ​	存在于内核内存中
  >
  >    ​	只能用于具有亲缘关系的进程之间的通信父子进程或兄弟进程
  >
  >    ​	2个文件描述符描述入口和出口
  >
  > 2. 命名管道FIFO
  >
  >    ​	存在于文件系统中
  >
  >    ​	可以用于在无关进程间通信
  >
  >    ![img](imgs\323808-20160311094842257-893623615.png)

* 消息队列

  >  消息的链接表，存在于内核，一个消息队列对应一个文件描述符
  >
  >  1. 面向记录，消息具有类型和优先级
  >  2. 进程终止时不会删除消息队列
  >  3. 消息队列支持随机查询，不必须先进先出，可以按类型查询
  >
  >  常用方法有：msgget创建 msgsnd发送消息 msgrcv读取消息 msgctl控制消息
* 信号量

  > 用于实现进程间的互斥与同步， 不是用来存储通信数据的
  >
  > 1. 用于进程间同步，若要传递数据需要结合共享内存
  > 2. 程序对信号量的操作都是原子操作

* 共享内存

  > 共享内存（Shared Memory），指两个或多个进程共享一个给定的存储区。
  >
  > 1. 最快的方式，因为进程直接对内存进行读读
  > 2. 需要处理共享内存多进程同步问题
  > 3. 常与信号量一同使用，信号量用来同步，共享内存用于存储数据

* 套接字Socket

  > 可用于不同及其间的进程通信

## 4、进程调度算法

* 先来先服务

  > 进程就绪就进入就绪队列，按顺序执行

* 时间片轮转法

  > 时钟触发中断，保存当前进程到就绪队列，基于先来先服务，执行下一进程

* 最短进程优先

  > 执行预计用时最短的进程

* 最短剩余时间优先

  > 抢占式，当进入一个新的预计执行时间短于当前进程剩余时间时，抢占执行新的

* 最高响应比优先

  > 响应比=（等待时间+预计执行时间）/预计执行时间
  >
  > 非抢占式，选择下一个响应比高的进程执行

* 多级反馈队列调度算法

  > 1. 多个队列，有不同的优先级。
  > 2. 优先级越高的队列，时间片就越小
  > 3. 新进程先放在优先级低的队列，按照先来先服务执行
  > 4. 一个时间片内未完成就升级排到高一级队列的末尾
  > 5. 低级队列有进程就不会对高级进行先来先服务调度
  > 6. 当执行高级队列进程时，新入队列会抢占执行